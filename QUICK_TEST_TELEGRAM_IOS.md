# Telegram iOS 原生 App 去广告 - 快速测试指南

## ⚡ 3 分钟快速测试

### 准备工作（一次性）

1. **确保已安装 Loon 并配置 MITM**
   - 如未配置，参考 [完整安装指南](README_IOS_NATIVE.md)

### 快速测试步骤

#### 第 1 步：导入插件（30 秒）

```
复制链接：
https://raw.githubusercontent.com/g1z2f/loon-telegram-adblocker-/main/TelegramAdBlock.plugin

Loon → 配置 → 插件 → "+" → 粘贴 → 确定
```

#### 第 2 步：启用插件（10 秒）

```
找到"Telegram 去广告" → 打开开关
启动 Loon VPN
```

#### 第 3 步：测试效果（2 分钟）

1. **打开 Telegram**

2. **访问大型频道**
   - 选择订阅数 > 10 万的频道
   - 新闻频道、科技频道最可能有广告

3. **查看效果**
   - ✅ 如果广告消失 → 成功！
   - ❌ 如果仍有广告 → 查看日志

#### 第 4 步：查看日志（30 秒）

```
Loon → 工具 → 日志 → 搜索 "Telegram"
```

**期望的日志：**
```
[Telegram AdBlocker] [SUCCESS] ✓ 移除了 X 个广告项
[Telegram AdBlocker] [INFO] 📊 数据大小: XXXX → YYYY bytes
```

**如果看到这个：**
```
[Telegram AdBlocker] [WARN] ⚠️ 检测到二进制数据（可能是 MTProto 协议）
```
说明 Telegram 使用 MTProto 协议，该请求无法拦截。

## 📊 测试结果判断

### ✅ 可能有效的迹象

1. **日志显示拦截成功**
   - 看到 "移除了 X 个广告项"
   - 看到 "处理完成" 的日志

2. **广告数量减少**
   - 某些频道的广告消失
   - 广告图片无法加载

3. **部分广告移除**
   - 不是所有广告都消失
   - 但比之前少

### ❌ 无效的迹象

1. **日志完全没有 Telegram 相关记录**
   - 可能没有拦截到任何请求
   - 说明 Telegram 完全使用 MTProto

2. **仅显示 MTProto 警告**
   - 所有请求都是 MTProto
   - MITM 无法处理

3. **广告完全没有变化**
   - 数量没有减少
   - 显示方式没有变化

## 🔧 如果无效，尝试高级配置

### 方案 1：启用实验性功能

1. **下载插件文件到本地**

2. **编辑文件**
   - 找到 `enable=false` 的行
   - 改为 `enable=true`

3. **重新导入到 Loon**

### 方案 2：添加更多 MITM 域名

在插件文件的 `[MITM]` 部分：

```
# 原来：
hostname = web.telegram.org

# 改为：
hostname = web.telegram.org, *.cdn.telegram.org
```

### 方案 3：对比测试

1. **关闭插件**
   - 记录广告数量

2. **开启插件**
   - 重启 Telegram
   - 对比广告数量

## 💡 测试建议

### 最佳测试频道类型

1. **大型新闻频道**
   - 通常有广告
   - 订阅数 > 10 万

2. **热门科技频道**
   - 广告较多
   - 更新频繁

3. **娱乐/生活类频道**
   - 可能有推广内容

### 不适合测试的频道

1. **小型频道（< 1000 人）**
   - 通常没有广告

2. **私人群组**
   - 不会有赞助广告

3. **官方频道**
   - 很少有广告

## 📝 测试反馈模板

如果您进行了测试，请按以下格式反馈：

```markdown
## 测试结果

**基本信息：**
- iOS 版本：17.1.1
- Telegram 版本：10.2.1
- Loon 版本：3.2.0

**测试频道：**
- 频道名称：XXX（订阅数：XX万）
- 是否有广告：是/否

**效果：**
- [ ] 广告完全消失
- [ ] 广告部分消失
- [ ] 广告数量减少
- [ ] 完全无效

**日志信息：**
[粘贴日志截图或内容]

**其他说明：**
[任何额外的观察]
```

## ⏱️ 时间线总结

- **00:00 - 00:30**: 导入插件
- **00:30 - 00:40**: 启用插件和 VPN
- **00:40 - 02:40**: 测试多个频道
- **02:40 - 03:00**: 查看日志

**总计：约 3 分钟**

## 🎯 预期结果

### 乐观情况（20% 概率）

- ✅ 某些广告被成功拦截
- ✅ 日志显示过滤成功
- ✅ 广告图片无法加载

### 中性情况（50% 概率）

- ⚠️ 偶尔能拦截某些请求
- ⚠️ 效果不稳定
- ⚠️ 部分频道有效，部分无效

### 悲观情况（30% 概率）

- ❌ 完全无效
- ❌ 所有流量都是 MTProto
- ❌ MITM 无法处理任何请求

## 💰 如果测试无效

**推荐方案：订阅 Telegram Premium**

```
价格：$4.99/月 或 $49.99/年
效果：100% 移除所有广告
额外功能：大文件上传、更快速度、独特表情等

订阅方法：
Telegram → 设置 → Telegram Premium
```

这是唯一官方且 100% 有效的去广告方法！

## 🔗 相关文档

- **[iOS 原生 App 完整指南](README_IOS_NATIVE.md)** - 详细说明
- **[技术研究报告](TECHNICAL_RESEARCH.md)** - 深入分析
- **[主文档](README.md)** - 项目概览

---

**祝测试顺利！** 🚀

无论结果如何，都欢迎反馈您的测试结果！
